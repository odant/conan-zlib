env:
  global:
    CONAN_PRINT_RUN_COMMANDS: 1
    CONAN_LOG_RUN_TO_OUTPUT: 1
    CONAN_COLOR_DISPLAY: 0

    CONAN_USERNAME: odant
    CONAN_REFERENCE: zlib/1.2.11

    CONAN_ARCHS: x86_64
    CONAN_BUILD_TYPES: Debug

    CONAN_UPLOAD: https://api.bintray.com/conan/odant/conan
    CONAN_LOGIN_USERNAME: dvetutnev
    CONAN_STABLE_BRANCH_PATTERN: release/*

linux: &linux_build
  os: linux
  dist: trusty
  sudo: false
  language: python
  python: "3.6"
#  virtualenv:
#    system_site_packages: true
  services:
    - docker

matrix:
  include:
    - <<: *linux_build
      env:
       CONAN_GCC_VERSIONS: 6.3
       CONAN_DOCKER_IMAGE: lasote/conangcc63

    - <<: *linux_build
      env:
       CONAN_GCC_VERSIONS: 7.2
       CONAN_DOCKER_IMAGE: lasote/conangcc72

install:
#  - pyenv versions
#  - pyenv local 3.6.3
#  - python --version
  - pip install conan
  - pip install conan_package_tools
  - conan user

script:
  - python build.py
